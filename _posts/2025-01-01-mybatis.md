---
title: MyBatis
author: Chu Ying
date: 2025-01-01
category: java
layout: post
---
<div style="white-space: pre-wrap">
一、基础概念类
1. 什么是 MyBatis？它和 JDBC 有什么区别？
什么是 MyBatis？
MyBatis 是一款优秀的半自动化的持久层框架，它封装了几乎所有的 JDBC 底层操作，简化了开发。
它的核心思想是将程序中的 SQL 语句剥离出来，配置在 XML 文件或注解中，从而实现 SQL 与 Java 代码的解耦。
它通过一套简单的配置，将 Java 对象（POJO）与数据库中的记录进行映射（ORM）。

它和 JDBC 有什么区别？
</div>

<table>
  <tr>
    <th>特性</th>
    <th>JDBC (Java Database Connectivity)</th>
    <th>MyBatis</th>
  </tr>
  <tr>
    <td>本质</td>
    <td>Java 访问数据库的标准 API，是基础。</td>
    <td>基于 JDBC 的封装和扩展，是一个框架。</td>
  </tr>
  <tr>
    <td>SQL 处理</td>
    <td>需要程序员手动编写、拼接复杂的 SQL 字符串在 Java 代码中，容易出错且难以维护。</td>
    <td>SQL 与 Java 代码分离，写在 XML 或注解中，清晰易管理。支持动态 SQL，灵活应对复杂查询。</td>
  </tr>
  <tr>
    <td>结果集处理</td>
    <td>需要手动编写代码从 ResultSet 中遍历并一个个字段地取出数据，再塞到 Java 对象中，非常繁琐。</td>
    <td>自动进行 ORM 映射，通过 &lt;resultMap&gt; 或约定，直接将查询结果映射成 Java 对象，无需手动处理。</td>
  </tr>
  <tr>
    <td>性能</td>
    <td>原生性能最高，但需要开发者自己优化（如连接池、预编译等）。</td>
    <td>性能接近 JDBC，因为它只是封装了 JDBC。它内置了连接池、预编译语句等优化，开箱即用。</td>
  </tr>
  <tr>
    <td>开发效率</td>
    <td>低。需要大量样板代码（注册驱动、获取连接、创建语句、处理异常、关闭资源等）。</td>
    <td>高。大大减少了冗余代码，开发者只需关注 SQL 和业务逻辑。</td>
  </tr>
  <tr>
    <td>可移植性</td>
    <td>差，SQL 硬编码在 Java 文件中，更换数据库可能需要修改代码。</td>
    <td>较好，SQL 在配置文件中，更换数据库时主要修改数据库连接配置和少量特定 SQL 语法。</td>
  </tr>
</table>
<pre>
总结：MyBatis 是 JDBC 的“增强版”，它解决了 JDBC 的硬编码、高冗余和繁琐结果集映射等问题，
极大地提高了开发效率和代码可维护性。
</pre>
<pre>
Service 调用数据访问方法
    ↓
Mapper 接口接收调用 (定义于 Repository/DAO 层)
    ↓
MyBatis 为 Mapper 接口生成代理实现
    ↓
代理对象解析方法名 → 查找对应的 SQL 映射
    ↓
SQL 映射文件 (或注解) 中定义的 SQL 语句
    ↓
MyBatis 创建 SqlSession → 获取数据库连接
    ↓
执行器 Executor 处理 SQL 执行
    ↓
参数处理器设置 PreparedStatement 参数
    ↓
执行 SQL 语句
    ↓
结果集处理器 ResultHandler 转换结果
    ↓
TypeHandler 进行 Java 类型与 JDBC 类型转换
    ↓
将结果集映射为 Java 对象/集合 (Entity 或 DTO)
    ↓
数据返回 → Mapper 接口 → Service
    ↓
Service 继续处理业务逻辑
    ↓
返回最终结果给 Controller
</pre>
