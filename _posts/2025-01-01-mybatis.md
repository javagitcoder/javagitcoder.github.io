---
title: MyBatis
author: Chu Ying
date: 2025-01-01
category: java
layout: post
---
## 一、基础概念类
### 1. 什么是 MyBatis？它和 JDBC 有什么区别？
#### 什么是 MyBatis？
MyBatis 是一款优秀的半自动化的持久层框架，它封装了几乎所有的 JDBC 底层操作，简化了开发。它的核心思想是将程序中的 SQL 语句剥离出来，配置在 XML 文件或注解中，从而实现 SQL 与 Java 代码的解耦。它通过一套简单的配置，将 Java 对象（POJO）与数据库中的记录进行映射（ORM）。
#### 它和 JDBC 有什么区别？
<table><thead><tr><th align="left">特性</th><th align="left">JDBC (Java Database Connectivity)</th><th align="left">MyBatis</th></tr></thead><tbody><tr><td align="left"><strong>本质</strong></td><td align="left"><strong>Java 访问数据库的标准 API</strong>&#xff0c;是基础。</td><td align="left"><strong>基于 JDBC 的封装和扩展</strong>&#xff0c;是一个框架。</td></tr><tr><td align="left"><strong>SQL 处理</strong></td><td align="left">需要程序员手动编写、拼接复杂的 SQL 字符串在 Java 代码中&#xff0c;容易出错且难以维护。</td><td align="left">SQL 与 Java 代码分离&#xff0c;写在 XML 或注解中&#xff0c;清晰易管理。支持动态 SQL&#xff0c;灵活应对复杂查询。</td></tr><tr><td align="left"><strong>结果集处理</strong></td><td align="left">需要手动编写代码从 <code>ResultSet</code> 中遍历并一个个字段地取出数据&#xff0c;再塞到 Java 对象中&#xff0c;非常繁琐。</td><td align="left"><strong>自动进行 ORM 映射</strong>&#xff0c;通过 <code>&lt;resultMap&gt;</code> 或约定&#xff0c;直接将查询结果映射成 Java 对象&#xff0c;无需手动处理。</td></tr><tr><td align="left"><strong>性能</strong></td><td align="left">原生性能最高&#xff0c;但需要开发者自己优化&#xff08;如连接池、预编译等&#xff09;。</td><td align="left">性能接近 JDBC&#xff0c;因为它只是封装了 JDBC。它内置了连接池、预编译语句等优化&#xff0c;开箱即用。</td></tr><tr><td align="left"><strong>开发效率</strong></td><td align="left"><strong>低</strong>。需要大量样板代码&#xff08;注册驱动、获取连接、创建语句、处理异常、关闭资源等&#xff09;。</td><td align="left"><strong>高</strong>。大大减少了冗余代码&#xff0c;开发者只需关注 SQL 和业务逻辑。</td></tr><tr><td align="left"><strong>可移植性</strong></td><td align="left">差&#xff0c;SQL 硬编码在 Java 文件中&#xff0c;更换数据库可能需要修改代码。</td><td align="left">较好&#xff0c;SQL 在配置文件中&#xff0c;更换数据库时主要修改数据库连接配置和少量特定 SQL 语法。</td></tr></tbody></table>
总结：MyBatis 是 JDBC 的“增强版”，它解决了 JDBC 的硬编码、高冗余和繁琐结果集映射等问题，极大地提高了开发效率和代码可维护性。

### 2. MyBatis 的核心组件有哪些？
<div style="white-space: pre-wrap">
<div style="font-size: 1.125em; font-weight: bold;">  【流程图】</div>
Service 调用数据访问方法
    ↓
Mapper 接口接收调用 (定义于 Repository/DAO 层)
    ↓
MyBatis 为 Mapper 接口生成代理实现
    ↓
代理对象解析方法名 → 查找对应的 SQL 映射
    ↓
SQL 映射文件 (或注解) 中定义的 SQL 语句
    ↓
MyBatis 创建 SqlSession → 获取数据库连接
    ↓
执行器 Executor 处理 SQL 执行
    ↓
参数处理器设置 PreparedStatement 参数
    ↓
执行 SQL 语句
    ↓
结果集处理器 ResultHandler 转换结果
    ↓
TypeHandler 进行 Java 类型与 JDBC 类型转换
    ↓
将结果集映射为 Java 对象/集合 (Entity 或 DTO)
    ↓
数据返回 → Mapper 接口 → Service
    ↓
Service 继续处理业务逻辑
    ↓
返回最终结果给 Controller
</div>
